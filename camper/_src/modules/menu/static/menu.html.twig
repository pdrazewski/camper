{% macro menu(
		data,
		submenu = {
			active: false,
			data
		}
		headline,
		style = {
			alignVertically,
			verticalAlignColumns,
			verticalAlignColumnName
		},
		selector = {
			class: "clearfix",
			listClass,
			profileId,
			id: null
		},
		toggle = {
			active: false,
			attributes,
			header,
			icon
		},
		noJS = true,
		extElement,
		afterAllZone
	)
%}


	<nav class="m-menu {{selector.class}}" {% if selector.id != null %}id="{{selector.id}}"{% endif %}>
		{% if toggle != false %}
			<span class="m-menu_toggle" id="js-menuToggle" {{ menuToggleAttributes|raw }}>
		{{menuToggleHeader|raw}}
				{% if menuToggleIcon is defined and menuToggleIcon is not null %}
					<i class="{{menuToggleIcon}}"></i>
				{% endif %}
	</span>
		{% endif %}
		{{menuHeadline|raw}}
		{% if menuToggle %}
		<div id="{{menuProfileId}}" class="m-menu_wrapper">
			{% endif %}

			{% if alignVertically and menuData|length %}
			{% set itemsPerColumn = (menuData|length / verticalAlignColumns)|round(0, 'ceil') %}
		{% else %}
			<ul class="m-menu_list clearfix2 {{menuListClass}}">
				{% endif %}

				{% for data in menuData %}
					{% if alignVertically and (itemsPerColumn == 1 or loop.index % itemsPerColumn == 1) %}
						<ul class="{{ verticalAlignColumnName }}">
					{% endif %}
					<li class="m-menu_item clearfix2 {{data.class}}{% if useJs == 1 %} js-menu_item{% endif %}"{% if data.attributes %} {{ data.attributes|raw }}{% endif %}>
						{% if data.item %}
							{% if data.useAsLink|default("true") == "true" %}
								<a class="m-menu_link {{data.linkClass}}" href="{{data.url}}" {{data.linkAttr|raw}}>
									{{data.item|raw}}
									{{data.itemContent|raw}}
								</a>
							{% else %}
								<p class="m-menu_title {{data.titleClass}}">
									{{data.item|raw}}
									{{data.itemContent|raw}}
								</p>
							{% endif %}
							{% if subMenu %}
								{% include ''~ subMenu ~ '' with obj %}
							{% endif %}
							{% if data.subMenu %}
								{{data.subMenu|raw}}
							{% endif %}
						{% endif %}
						{% if data.content %}
							<div class="m-menu_content js-menu_content js-menu_content{{loop.index}}">
								{{data.content|raw}}
							</div>
						{% endif %}
						{{extElement|raw}}
					</li>
					{% if data.sibling %}
						{{ data.sibling|raw }}
					{% endif %}
					{% if alignVertically and (loop.last or loop.index % itemsPerColumn == 0) %}
						</ul>
					{% endif %}
				{% endfor %}
				{% if not alignVertically or not menuData|length %}
			</ul>
			{% endif %}
			{% if menuToggle %}
		</div>
		{% endif %}
		{{adBottom|raw}}
	</nav>

{% endmacro %